(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(19),o=a.n(r),c=a(9),i=a(2),u=a(3),l=a(5),h=a(4),p=a(0),d=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:""},e.onSubmit=function(t){t.preventDefault(),""!==e.state.search.trim()?(e.props.onSubmit(e.state.search),e.setState({search:""})):alert("Add your search query")},e.onChange=function(t){e.setState({search:t.target.value})},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"Searchbar",children:Object(p.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmit,children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{onChange:this.onChange,name:"searh",value:this.state.search,className:"SearchForm-input",type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),m=a(20),j=a.n(m),b=function(){function e(){Object(i.a)(this,e),this._searchQuery="",this.page=1}return Object(u.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"searchPage",get:function(){return this.page},set:function(e){return this.page=e}},{key:"resetPage",value:function(){return this.page=1}},{key:"searchPhotos",value:function(){var e="https://pixabay.com/api/"+"?q=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&image_type=photo&orientation=horizontal&key=").concat("23081749-b9f3d38fc4718cbd45a8beed9");return j.a.get(e).then((function(e){return e})).catch((function(e){console.log(e)}))}}]),e}(),g=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={modalIsOpen:!1},e}return Object(u.a)(a,[{key:"render",value:function(){return this.props.images.map((function(e){var t=e.webformatURL,a=e.id,n=e.tags;return Object(p.jsx)("li",{className:"ImageGalleryItem",children:Object(p.jsx)("img",{id:a,src:t,alt:n,className:"ImageGalleryItem-image"})},a)}))}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("ul",{onClick:this.props.onModalOpen,className:"ImageGallery",children:Object(p.jsx)(g,{images:this.props.images})})})}}]),a}(n.Component),f=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleClick=function(){return e.props.onClick(1)},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(p.jsx)("button",{onClick:this.handleClick,className:"Button",type:"button",children:"Load More!"})}}]),a}(n.Component),y=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",(function(t){27===t.keyCode&&e.props.onModalCloseByEsc()}))}},{key:"render",value:function(){return Object(p.jsx)("div",{onClick:this.props.onModalClose,onKeyDown:this.props.onKeyDown,className:"Overlay",children:Object(p.jsx)("div",{className:"Modal",children:Object(p.jsx)("img",{className:"LargeGalleryImage",src:this.props.largeImg,alt:""})})})}}]),a}(n.Component),v=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"lds-ellipsis",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})}}]),a}(n.Component),S=(a(44),new b),x=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:"",page:1,responseData:[],status:"init",modalIsOpen:!1,largeImg:""},e.onSearchFormSubmit=function(t){e.setState({search:t})},e.onClick=function(t){e.setState((function(e){return{page:e.page+1,status:"pending"}})),S.searchPage=e.state.page,S.searchPhotos().then((function(t){e.setState((function(e){return{responseData:[].concat(Object(c.a)(e.responseData),Object(c.a)(t.data.hits))}}))})).catch((function(e){console.log(e)})).finally((function(){e.setState({status:"success"}),window.scrollTo({top:document.documentElement.scrollHeight-1200,behavior:"smooth"})}))},e.onModalOpen=function(t){var a=e.state.responseData.find((function(e){return e.id.toString()===t.target.id}));e.setState((function(e){return{modalIsOpen:!e.modalIsOpen,largeImg:a.largeImageURL}}))},e.onModalClose=function(t){"Overlay"===t.target.className&&"Overlay"===t.currentTarget.className&&e.setState((function(e){return{modalIsOpen:!e.modalIsOpen}}))},e.onModalCloseByEsc=function(){e.setState({modalIsOpen:!1})},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;t.search!==this.state.search&&(window.scrollTo({top:document.documentElement,behavior:"smooth"}),S.resetPage(),this.setState({status:"pending",page:1}),S.searchQuery=this.state.search,S.searchPhotos().then((function(e){0!==e.data.hits.length?a.setState({responseData:Object(c.a)(e.data.hits)}):alert("Nothing to show! Change your search query")})).then(this.setState((function(e){return{page:e.page+1}}))).finally((function(){a.setState({status:"success"})})))}},{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d,{onSubmit:this.onSearchFormSubmit}),Object(p.jsx)(O,{images:this.state.responseData,onModalOpen:this.onModalOpen}),"pending"===this.state.status&&Object(p.jsx)(v,{}),this.state.responseData.length>0&&Object(p.jsx)(f,{onClick:this.onClick}),this.state.modalIsOpen&&Object(p.jsx)(y,{onModalOpen:this.onModalOpen,onModalClose:this.onModalClose,onModalCloseByEsc:this.onModalCloseByEsc,largeImg:this.state.largeImg})]})}}]),a}(n.Component);o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.db77233e.chunk.js.map